#!/usr/bin/env bash
#dig the data
if [[ ! -s apache-access.log ]]; then
    echo "Log file is empty or does not exist."
    exit 1
fi

# Use awk to process the log file, grouping by IP and HTTP status code, then count occurrences
awk '{
    if (NF >= 9) { 
        print $1, $9
    }
}' apache-access.log | sort | uniq -c | sort -nr | awk '{print $1, $2, $3}'
